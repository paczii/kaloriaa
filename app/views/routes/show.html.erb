<script src="//maps.google.com/maps/api/js?key=AIzaSyBmGS5C165qP9fFXUSavDO8r2SCkshzjs8"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<div class="container">
  <div class="row">
    <div class="col-xs-4 item-photo">

      <div class="box" style="text-align: center; display: inline">
        <div class="box-icon" style="height: 220px; width: 220px"> <span class="fa fa-5x fa-road"></span> </div>


        <div class="info">
          <h4 class="text-center">     </h4>
        </div>
      </div>



    </div>


    <div class="col-xs-7" style="border:0px solid gray; border-left:1px solid #9b9b9b;">
      <!-- Datos del vendedor y titulo del producto -->
      <h1> Route <%= @route.id %> </h1>
      <h5 style="margin-bottom: 50px;">Von Fahrer <%= link_to Driver.find(@route.driver_id).name, Driver.find(@route.driver_id) %>. Generiert in der <%= link_to "Optimierung " + Optimization.find(@route.optimization_id).id.to_s, Optimization.find(@route.optimization_id) %> </h5>




      <div class="section" style="padding-bottom:20px;">
        <h3 style="margin-top:15px;">Allgemeine Daten </h3>
        <h4 style="margin-top:15px;">Erstellt am: <%= @route.created_at.to_time.strftime('%d.%m.%Y (%H:%M Uhr)') %> </h4>
        <h4 style="margin-top:15px;">Fahrer: <%= link_to Driver.find(@route.driver_id).name, Driver.find(@route.driver_id) %> </h4>
        <h4 style="margin-top:15px;">Optimierung: <%= link_to Optimization.find(@route.optimization_id).id.to_s, Optimization.find(@route.optimization_id)  %> </h4>
        <h4 style="margin-top:15px;">Gesamtkosten: <%= number_to_currency(@route.worktimecosts + @route.drivingcosts, :unit => "€", format: "%n %u" ) %> </h4>
      </div>

      <div class="section" style="background: white; margin: 3px"></div>

          <div class="section" style="padding-bottom:20px;">
            <h3 style="margin-top:25px;">Route </h3>
            <h4 style="margin-top:15px;">Route: <%= @route.route %> </h4>
            <h4 style="margin-top:15px;">Fahrtzeit: <%= @route.traveltime %> Minuten  </h4>
            <h4 style="margin-top:15px;">Distanz: <%= @route.traveldistance %> Kilometer </h4>
            <h4 style="margin-top:15px;">Gesamtemissionen: <%= @route.emissions %>  Gramm </h4>
          </div>

          <div class="section" style="background: white; margin: 3px"></div>

          <div class="section" style="padding-bottom:20px;">
            <h3 style="margin-top:25px;">Beladung </h3>
            <h4 style="margin-top:15px;">Boxen: <%= @route.boxes %> </h4>
            <h4 style="margin-top:15px;">Kühlboxen: <%= @route.coolingboxes %> </h4>
            <h4 style="margin-top:15px;">Tiefkühlboxen: <%= @route.freezingboxes %> </h4>
          </div>

      <div class="section" style="background: white; margin: 3px"></div>


      <div class="section" style="padding-bottom:20px;">
            <h3 style="margin-top:25px;">Routenspezifische Kosten </h3>
            <h4 style="margin-top:15px;">Personalkosten: <%= number_to_currency(@route.worktimecosts, :unit => "€", format: "%n %u" ) %>  </h4>
            <h4 style="margin-top:15px;">Fahrtkosten: <%= number_to_currency(@route.drivingcosts, :unit => "€", format: "%n %u" ) %>  </h4>
          </div>

      <div class="section" style="background: white; margin: 30px"></div>


      <div class="section" style="padding-bottom:20px; background: none">
        <%= link_to Driver.find(@route.driver_id) do %>
            <div class="box">
              <div class="box-icon"> <span class="fa fa-3x fa-address-card"></span> </div>
              <div class="info">
                <h4 class="text-center"><%= "Fahrer anzeigen" %></h4>
                <p><!-- PLATZHALTER FÜR MÖGLICHEN TEXT--></p>
              </div>
            </div>
        <% end %>
      </div>


      <div class="section" style="padding-bottom:20px; background: none">
        <%= link_to Optimization.find(@route.optimization_id) do %>
            <div class="box">
              <div class="box-icon"> <span class="fa fa-3x fa-cog"></span> </div>
              <div class="info">
                <h4 class="text-center"><%= "Optimierung anzeigen" %></h4>
                <p><!-- PLATZHALTER FÜR MÖGLICHEN TEXT--></p>
              </div>
            </div>
        <% end %>
      </div>

      <div class="section" style="background: white; margin: 3px"></div>


    </div>






  </div>



</div>


<div style="margin-bottom: 30px"></div>

<% customerlist = @route.route.split("->") %>
<div class="table-responsive">
  <table class="table table-striped smalltable">
    <thead>
    <tr>
      <th>Nummer</th>
      <th>Kundenname</th>
      <th>Adresse</th>
    </tr>
    </thead>
    <tbody>

    <% @counter = 1
      customerlist.each do |customer|
        mycustomer = Customer.find(Order.find(customer).customer_id)
    %>

    <tr>
      <td><%= @counter %></td>  <% @counter += 1 %>
      <td><%= mycustomer.name  %></td>
      <td><%= mycustomer.zip %> <%= mycustomer.city %> <br> <%= mycustomer.street %></td>
    </tr>

    <% end %>

    </tbody>
  </table>
</div>

<div style="margin-bottom: 30px"></div>


<%= render 'map' %>





<div style="margin-bottom: 65px"></div>

